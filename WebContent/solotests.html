<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="PS">

	<title>PBrowse Tests</title>

	<!-- JQueryUI Core CSS -->
	<link href="css/jquery-ui.min.css" rel="stylesheet">

	<!-- Bootstrap Core CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom CSS -->
	<link href="css/pbrowse.css" rel="stylesheet">
	
	<!-- jQuery -->
	<script src="js/jquery.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.min.js"></script>

	<!-- JQuery UI core -->
	<script src="js/jquery-ui.min.js"></script>
	
	<style>
	.question {display:none;}
	.answerField {display:none;}
	.endResponse {display:none;}
	.browser{color: red;font-size: 20px;}
	</style>
	
</head>

<body>

	<!-- Navigation -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/pbrowse">PBrowse Tests<span id="loggedInUser"></span></a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<!-- Page Content -->
	<div class="container">

		<div class="row">

			<div class="col-md-3"></div>

			<div class="col-md-9">

				<div id="questions">
					<div id="q0" class="question">
						<p>Question 0 - Me</p>
						<p>
							<label>Enter your name:</label>
							<input type="text" id="username" class="text ui-widget-content ui-corner-all"></input>
						</p>
					</div>
					<div id="q1" class="question">
						<p>Question 1 - Proficiency</p>
						<p>
							<label>Technical Proficiency (1-5)</label>
							<input type="text" id="techproficiency" class="text ui-widget-content ui-corner-all"></input>
							<label>Genome Browser Familiarity/Proficiency (1-5)</label>
							<input type="text" id="browserproficiency" class="text ui-widget-content ui-corner-all"></input>
						</p>
					</div>
					<div id="q2" class="question">
						<p>Question 2</p>
						<p>
							<label>Most Used Genome Browser/Program</label>
							<input type="text" id="mostusedgenomebrowser" class="text ui-widget-content ui-corner-all"></input>
						</p>
					</div>
					<div id="q3" class="question">
						<p>Question 3 - Loading Custom Data - <span class="browser">IGV</span></p>
						<div>
							<p>Download the bigwig file located <a href="http://ec2-54-148-150-45.us-west-2.compute.amazonaws.com:8080/pbrowse/files/10">here</a> 
							and load it into IGV. Identify the peak value in the given genomic windows to the nearest integer:<br>
							</p>
							<ul class="questionlist">
								<li>chr2:9,725,036-9,725,661</li>
								<li>chr2:10,268,923-10,269,078</li>
								<li>chr2:11,242,850-11,243,005</li>
								<li>chr7:48,672,185-48,672,594</li>
								<li>chr7:132,719,406-132,719,456</li>
							</ul>
							<p>Answer below:</p>
							<div class="answerField">
								<input type="text" id="peak1-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak2-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak3-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak4-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak5-igv" class="text ui-widget-content ui-corner-all"></input>
							</div>
							<button class="startResponse" style="width:100%;">Start Answering (Starts a timer)</button>
							<button class="endResponse" style="width:100%;">Lock in responses</button>
						</div>
					</div>
					<div id="q4" class="question">
						<p>Question 4 - Loading Custom Data - <span class="browser">UCSC</span></p>
						<div>
							<p>UCSC cannot directly accept file uploads so copy this address "http://hgdownload.cse.ucsc.edu/goldenPath/hg19/encodeDCC/wgEncodeHaibRnaSeq/wgEncodeHaibRnaSeqJurkatRawRep2.bigWig" 
							and load it into the UCSC genome browser by going <a href="https://genome.ucsc.edu/cgi-bin/hgCustom">here</a> and pasting it into the first box.<br>
							View the track by going <a href="https://genome.ucsc.edu/cgi-bin/hgCustom">here</a>. Leave DEFAULT settings on. 
							<br><br>Identify the peak value in the given genomic windows to the nearest integer:<br>
							</p>
							<ul class="questionlist">
								<li>chr21:19,902,930-20,678,082</li>
								<li>chr21:44,395,072-44,958,819</li>
								<li>chr20:18,536,476-19,031,716</li>
								<li>chr20:32,184,170-32,836,757</li>
								<li>chr20:34,263,756-34,368,858</li>
							</ul>
							<p>Answer below:</p>
							<div class="answerField">
								<input type="text" id="peak1-UCSC" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak2-UCSC" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak3-UCSC" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak4-UCSC" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak5-UCSC" class="text ui-widget-content ui-corner-all"></input>
							</div>
							<button class="startResponse" style="width:100%;">Start Answering (Starts a timer)</button>
							<button class="endResponse" style="width:100%;">Lock in responses</button>
						</div>
					</div>
					<div id="q5" class="question">
						<p>Question 5 - Loading Custom Data - <span class="browser">PBrowse</span></p>
						<div>
							<p>Download the bigwig file located <a href="http://ec2-54-148-150-45.us-west-2.compute.amazonaws.com:8080/pbrowse/files/10">here</a> 
							and load it into the genome browser. <br><br><em>Select a track and use Shift+Uparrow/Downarrow to make it bigger/smaller</em><br>
							Identify the peak value in the given genomic windows to the nearest integer:<br>
							</p>
							<ul class="questionlist">
								<li>11:25,609,719..25,610,653</li>
								<li>8:30,432,430..30,441,578</li>
								<li>8:27,689,770..27,691,661</li>
								<li>3:23,175,361..23,177,254</li>
								<li>3:25,641,778..25,643,671</li>
							</ul>
							<p>Answer below:</p>
							<div class="answerField">
								<input type="text" id="peak1-PBrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak2-PBrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak3-PBrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak4-PBrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="peak5-PBrowse" class="text ui-widget-content ui-corner-all"></input>
							</div>
							<button class="startResponse" style="width:100%;">Start Answering (Starts a timer)</button>
							<button class="endResponse" style="width:100%;">Lock in responses</button>
						</div>
					</div>
					<div id="q6" class="question">
						<p>Question 6 - Identify gene positions - <span class="browser">UCSC</span></p>
						<div>
							<p>Using the UCSC browser with DEFAULT SETTINGS, identify and record the positions of the following REFSEQ genes, no extra data files are necessary: <br>
							</p>
							<ul class="questionlist">
								<li>RALY</li>
								<li>BPI</li>
								<li>SNTA1</li>
								<li>LINC00657</li>
								<li>AAR2</li>
							</ul>
							<p>Answer below:</p>
							<div class="answerField">
								<input type="text" id="genepos1-ucsc" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos2-ucsc" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos3-ucsc" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos4-ucsc" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos5-ucsc" class="text ui-widget-content ui-corner-all"></input>
							</div>
							<button class="startResponse" style="width:100%;">Start Answering (Starts a timer)</button>
							<button class="endResponse" style="width:100%;">Lock in responses</button>
						</div>
					</div>
					<div id="q7" class="question">
						<p>Question 7 - Identify gene positions - <span class="browser">IGV</span></p>
						<div>
							<p>Using the genome browser, identify and record the positions of the following genes: <br>
							</p>
							<ul class="questionlist">
								<li>AUTS2</li>
								<li>TES</li>
								<li>EVX1</li>
								<li>GPR141</li>
								<li>ING3</li>
							</ul>
							<p>Answer below:</p>
							<div class="answerField">
								<input type="text" id="genepos1-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos2-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos3-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos4-igv" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos5-igv" class="text ui-widget-content ui-corner-all"></input>
							</div>
							<button class="startResponse" style="width:100%;">Start Answering (Starts a timer)</button>
							<button class="endResponse" style="width:100%;">Lock in responses</button>
						</div>
					</div>
					<div id="q8" class="question">
						<p>Question 8 - Identify gene positions - <span class="browser">PBrowse</span></p>
						<div>
							<p>Using the genome browser, identify and record the positions of the following genes. <br><br>CLICK on a gene in the view to see FULL DETAILS: <br>
							<img src="http://i.imgur.com/0aN4IvN.png">
							</p>
							<ul class="questionlist">
								<li>LUZP2</li>
								<li>HTATIP2</li>
								<li>SOX12</li>
								<li>CENPB</li>
								<li>HAO1</li>
							</ul>
							<p>Answer below:</p>
							<div class="answerField">
								<input type="text" id="genepos1-pbrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos2-pbrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos3-pbrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos4-pbrowse" class="text ui-widget-content ui-corner-all"></input>
								<input type="text" id="genepos5-pbrowse" class="text ui-widget-content ui-corner-all"></input>
							</div>
							<button class="startResponse" style="width:100%;">Start Answering (Starts a timer)</button>
							<button class="endResponse" style="width:100%;">Lock in responses</button>
						</div>
					</div>
				</div>
				<br>
				<button id="nextQuestion" style="width:100%;">Next Question</button>

			</div>

		</div>

	</div>
	<!-- /.container -->
	
	<script>
	var currentQuestion = 0;
	var allResponses = {"test":"solo"};
	
	$(function() 
	{
		$("#q0").show();
		
		var startResp, endResp;
		
		//goto next question
		$("#nextQuestion").on("click",function()
		{
			var resp = {};
			var answers = $("#q"+currentQuestion).find("input");
			for (var i=0; i<answers.length; i++)
			{
				resp[answers[i].id] = answers[i].value;	
			}
			
			allResponses["q"+currentQuestion] = resp;
			
			//goto next question
			currentQuestion++;
			$(".question").hide();
			
			if ($("#q"+currentQuestion).length == 0)
			{
				//reached end
				$("#nextQuestion").hide();
				
				allResponses.timestamp = new Date().toString();
				
				var posting = $.post( 'testlogger', { result: JSON.stringify(allResponses) } );
				
				posting.done(function( data ) 
				{
					alert(data);
				});
				
				return;
			}
			$("#q"+currentQuestion).show();
			
			//hide next question if there is a timed response prompt
			var t = $("#q"+currentQuestion).find("button");
			if (t.length > 0)
			{
				$("#nextQuestion").hide();
			}
			$(".startResponse").show();
			$(".questionlist").hide();
			
// 			alert(JSON.stringify(allResponses));
		});
		
		$(".startResponse").on("click",function()
		{
			$("#nextQuestion").hide();
			$(".startResponse").hide();
			$(".answerField").show();
			$(".endResponse").show();
			$(".questionlist").show();
			
			startResp = new Date();
		});
		
		$(".endResponse").on("click",function()
		{
			$("#nextQuestion").show();
			$(".answerField").hide();
			$(".endResponse").hide();
			
			endResp = new Date();
			
			allResponses["q"+currentQuestion+"_time"] = (endResp-startResp)/1000;
			
			$("#nextQuestion").click();
		});
	});
	</script>

	<div class="container">
		<hr>
		<!-- Footer -->
		<footer>
			<div class="row">
				<div class="col-lg-12">
					<p>PBrowse 2015, University of Sydney, in collaboration with VCCRI.</p>
				</div>
			</div>
		</footer>
	</div>
	<!-- /.container -->
	
</body>

</html>
